<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerenciador de Despesas</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.16.9/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.19/jspdf.plugin.autotable.min.js"></script> 
    <link rel="stylesheet" href="styles.css">


    

    <style>
        * {
            box-sizing: border-box;
        }
        body {
            font-family: Arial, sans-serif;
            background-color: #fff;
            color: #fff;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }

        .container {
            display: grid;
            grid-gap: 20px;
            padding: 20px;
            max-width: 1320px;
            width: 100%;
            height: auto;
        }
        .container > div {
            background-color: #666666;
            padding: 20px;
            border-radius: 8px;
            justify-content: center;
            text-align: center;
        }
        .menu {
            grid-row: span 5;
            display: flex;
            flex-direction: column;
            justify-content: flex-start !important;
            align-items: stretch;
            height: 850px;
            width: 296px;
        }

        #open-modal-btn, #open-modal-btn-conta, #open-modal-btn-cartao {
            height: 60px;
            font-size: 16px;   
            font-weight: 700;
        }

        .bloco-de-despesas {
            grid-column: 2 / 9;
            display: grid;
            gap: 20px;
            font-weight: 700;
            grid-template-columns: repeat(3, 1fr);
        }

        #total-revenue {
            order: 4;
        }
        #total-expenses {
            order: 5;
        }

        #total-balance {
            order: 3;
        }

        body > div.container > div.bloco-de-despesas > div:nth-child(4) {
            order: 1;
        }
        body > div.container > div.bloco-de-despesas > div:nth-child(5) {
            order: 2;
        }

        .bancos-bloco {
            background-color: #666666;
            border-radius: 8px;
            min-height: 160px;
            max-height: 160px;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            order: 1;
            grid-column: 1 / 4;
            gap: 20px;
        }

        .logo-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .logo-container > img {
            width: 50px;    
            height: auto;
            margin: 20px auto 30px auto;
        }

        .logo-user {
            display: flex;
            align-items: center;
            border-top: 1px solid #ccc;
            border-bottom: 1px solid #ccc;
            margin-bottom: 30px;
        }

        .logo-user > img{
            width: 60px;
            height: auto;
            border-radius: 50%;
            display: flex;
            justify-content: left;
            margin-top: 20px;
            margin-bottom: 20px;
            border: 3px solid;
        }

        .user-info {
            margin: 10px;
            display: flex;
            flex-direction: column;
        }

        .greeting {
            font-size: 14px;
            color: #fff;
            margin: 0;
            text-align: left;   
        }

        .username {
            font-size: 16px;
            font-weight: bold;
            color: #fff;
            margin: 0;
            text-align: left;
        }

        

        .menu button {
            background-color: #1e1e1e;
            border: none;
            color: white;
            padding: 10px;
            width: 80%;
            border-radius: 5px;
            cursor: pointer;
            transition: .2s ease-in-out 0s;
            margin-left: auto;
            margin-right: auto;
            display: flex;
            align-items: center;
            justify-content: left;
        }
        
        .menu button i {
            margin-right: 12px;
            font-size: 14px;
        }
        
        .menu button:hover {
            background-color: #555;
            transform: scale(1.1);
        }

        .minhas-contas {
            border-radius: 8px;
            overflow: hidden;
            background-color: #1e1e1e;
            text-align: left;
            transition: overflow 0.3s ease;
        }

        .minhas-contas > span {
            font-size: 10px;
        }    

        .minhas-contas > i {
            font-size: 11px;
            margin-right: 5px;
            margin-left: 10px;
            padding-top: 10px;;
        }

        .minhas-contas > div {
            margin: 10px;
            margin-top: 8px;
            font-size: 12px;
            border-top: 1px solid #444;
            padding-top: 10px;
        }

        .meus-cartões {
            background-color: #2d2d2d;
            border-radius: 8px;
            overflow: hidden;
            background-color: #1e1e1e;
            text-align: left;
            transition: overflow 0.3s ease;
        }

        .meus-cartões > span {
            font-size: 10px;
        }

        .meus-cartões > i {
            font-size: 11px;
            margin-right: 5px;
            margin-left: 10px;
            padding-top: 10px;
        }

        .meus-cartões > div {
            margin: 10px;
            margin-top: 8px;
            font-size: 12px;
            border-top: 1px solid #444;
            padding-top: 10px;
        }

        .meus-cartões > img {
            width: 150px!important;
        }

        .minhas-contas:hover, .meus-cartões:hover {
            overflow-y: auto;
}

        .large {
            grid-column: span 1;
            font-size: 1.5em;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            background: linear-gradient(90deg, rgba(223, 159, 8, 1) 0%, rgba(190, 144, 14, 1) 0%, rgba(255, 0, 0, 1) 100%);
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            height: 110px;
        }
        .receitas-bloco, .despesas-bloco {
            grid-column: span 2;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #666666;
            border-radius: 8px;
            width: 100%;
            padding: 10px;
        }

        .despesas-e-receitas {
            gap: 20px;
            display: inline-flex;
            order: 4;
            grid-column: 1 / 4;
        }


        .grafico-bloco {
            grid-column: 2 / 9;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            grid-template-rows: repeat(2, 1fr);
            gap: 20px;
            height: 501px;
        }
        .grafico-item {
            background-color: #2d2d2d;
            border: 1px solid #555;
            border-radius: 8px;
            text-align: center;
            height: 100%;
        }
        .lancamentos {
            grid-column: 1 / 9;
            display: inline-flex;
            gap: 20px;
            height: 400px;
            max-height: 400px;
            overflow-y: auto;
            overflow-x: hidden;
            margin-top: -60px;
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.4);
            padding-top: 60px;
        }
        .modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 600px;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close:hover, .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }

        h1 {
            color: #555;
            text-align: center;
        }

        #transaction-form, #account-form, #card-form {
            display: flex;
            flex-direction: column;
            color: #555;
            font-size: 11px;
            gap: 3px;
        }

        #transaction-form > button, #account-form > button, #card-form > button {
            margin-top: 10px;
            padding: 5px;
            padding-inline: 10px;
            background: #28a745;
            color: #fff;
            border-radius: 4px;
            cursor: pointer;
        }

        #transaction-form > button:hover, #account-form > button:hover, #card-form > button:hover {
            color: #fff;
            background: #28a777;
        }

        #type, #description, #category, #amount, #date, #account-name, #account-balance, #card-name, #card-limit {
            padding: 6px;
            margin-bottom: 10px;
            color: #444;  
        }

        .grafico-item span {
            color: #fff;
            font-size: 14px;
            font-weight: bold;
        }

        /* Tabela CSS */
        .tabela {
            width: 100%;
            border-collapse: collapse;
            color: white;
        }

        .tabela th, .tabela td {
            border: 1px solid #555;
            padding: 8px;
            text-align: left;
        }

        .tabela th {
            background-color: #444;
            text-align: center;
        }

        #receitas-table > tbody > tr {
            font-size: 12px;
        }

        #receitas-table > thead > tr {
            font-size: 14px;
        }

        #despesas-table > tbody > tr {
            font-size: 12px;
        }

        #despesas-table > thead > tr {
            font-size: 14px;
        }

        .logo-list {
            display: none;
            position: absolute;
            background-color: #2d2d2d;
            border: 1px solid #555;
            max-height: 200px;
            overflow-y: auto;
            z-index: 10;
            width: 90%;
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .logo-list img {
            width: 60px;
            height: auto;
            cursor: pointer;
            margin: 5px;
            border-radius: 4px;
            transition: transform 0.2s;
        }
        .logo-list img:hover {
            transform: scale(1.1);
            border: 2px solid #28a745;
        }
        .logo-container {
            position: relative;
        }
        .selected-logo {
            width: 60px;
            height: auto;
            border: 1px solid #555;
            border-radius: 4px;
            display: block;
            margin-top: 10px;
        }


        #bank-logo-card {
            padding: 6px;
            color: #444;
            margin-bottom: 10px;
        }
            
        #bank-logo-account {
            padding: 6px;
            color: #444;
            margin-bottom: 10px;
        }

                .container > div:empty {
            display: none;
        }

        .filters {
            display: flex;
            flex-direction: column;
        }

        .dropdown {
            display: none;
            border: 1px solid #ccc;
            padding: 10px;
            background: white;
            color: #444;
            position: absolute;
            text-align: left;
            max-height: 0;
            opacity: 0;
            visibility: hidden;
            overflow: hidden;
            transition: max-height 0.3s ease, opacity 0.3s ease, visibility 0.3s ease;
            pointer-events: none;

            
        }

        .filters div:hover .dropdown {
            max-height: 200px; 
            opacity: 1;
            visibility: visible;
            overflow: auto; 
            pointer-events: auto; 
        }

        ul {
            list-style-type: none; 
            padding: 0;
            margin: 0;
        }

        li {
            margin: 5px 0; 
        }

        button {
            margin: 5px;
        }

        #clear-filters {
            background: red;        
        }

        .export {
            margin-top: auto;
            margin-bottom: auto;
        }

        #export-excel {
            cursor: pointer;
            margin-bottom: 15px;
            padding: 5px;
        }

        #export-pdf {
            cursor: pointer;
            padding: 5px;
        }


        footer {
            color: #000;
            text-align: center;
            position: relative;
            bottom: 0;
            width: 100%;
            grid-column: 1 / 9;
            }

            .footer-content {
  display: flex;
  justify-content: space-around;
  align-items: flex-start;
  gap: 20px;
  flex-wrap: wrap;
  max-width: 1000px;
  margin: 0 auto;
  padding-bottom: 20px;
}

footer a {
    color: #000;
    font-size: 16px;
    text-decoration: none;
    transition: color 0.3s;
    display: inline-flex;
    align-items: center;
}

footer a:hover {
  color: #007bff;
}

.terms {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.contact-info a, .social-media a {
  font-size: 14px;
  margin: 5px 0;
}

.contact-info a {
margin: 5px 0 0 25px;
}

.contact-info p {
margin: 0 0 5px;
font-weight: bold;
}

footer i {
  margin-right: 8px;
  font-size: 20px;
}

.social-media p {
  margin: 0 0 5px;
  font-weight: bold;
}

.terms p {
    margin: 0 0 5px;
    font-weight: bold; 
}

.terms a {
font-size: 14px;
margin: 5px 0 0;
}

footer p {
  margin-top: 20px;
  margin-bottom: 0;
  font-size: 16px;
  color: #000;
}

body > div.container > footer > p {
    font-size: 12px;  
}


/* Estilo do botão de modo noturno */
#darkModeToggle {
    background: none;
    border: none;
    color: #fff;
    font-size: 18px;
    cursor: pointer;
    transform: none;
    width: auto;
    margin-bottom: 20px;
}

#darkModeToggle i:hover {
    background: #1e1e1e;
    color: #ffcc00;
}

body.dark-mode #darkModeToggle i:hover {
    color: #000;
    background: #fff;
}

#darkModeToggle i {
    color: #000;
    border: 1px solid #1e1e1e;
    padding: 10px;
    border-radius: 50%;
    margin-bottom: 10px;
    background: #fff;
    transition: color 0.3s;
    margin: 0;
}

body.dark-mode #darkModeToggle i {
    color: #ffcc00;
    border: 1px solid #ccc;
    padding: 10px;
    border-radius: 50%;
    margin-bottom: 10px;
    background: #1e1e1e;
    margin: 0;
}

/* Estilos de Modo Noturno */
body.dark-mode {
    background-color: #1e1e1e;
    color: #fff;
}

body.dark-mode .menu,
body.dark-mode .receitas-bloco,
body.dark-mode .despesas-bloco,
body.dark-mode .bancos-bloco,
body.dark-mode .bloco-de-despesas, 
body.dark-mode .grafico-bloco, 
body.dark-mode .lancamentos {
    background-color: #2d2d2d;
    color: #fff;
}
 
body.dark-mode footer, 
body.dark-mode footer p,
body.dark-mode footer a {
    color: #fff;

body.dark-mode .tabela th {
    background-color: #444;
    color: #fff;
}

body.dark-mode .large {
    background-color: orange;
}


    </style>
    
</head>
<body>
    <div class="container">
        <div class="menu">
            <div class="logo-container">
                <img src="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/bemii.png?raw=true" alt="Logo Bemii">
                            <!-- Botão de modo noturno -->
                    <button id="darkModeToggle" aria-label="Alternar modo noturno">
                        <i class="fas fa-moon"></i> <!-- Ícone de lua para modo noturno -->
                    </button>
            </div>
            

            <div class="logo-user">
                <img src="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/bemii.png?raw=true" alt="Logo Bemii">
                <div class="user-info">
                    <p class="greeting">Bem-vindo,</p>
                    <p class="username">Nome do Usuário</p> <!-- Substitua 'Nome do Usuário' pelo nome real do usuário -->
                </div>
            </div>

            <button id="open-modal-btn"><i class="fas fa-plus"></i> Gerar Lançamento</button>
            <button id="open-modal-btn-conta"><i class="fas fa-id-card"></i> Incluir Conta</button>
            <button id="open-modal-btn-cartao"><i class="fas fa-credit-card"></i> Incluir Cartão</button>
            <div class="filters">
                <div>
                    <button id="filter-banks">
                        <i class="fas fa-university"></i> Filtrar por Bancos
                    </button>
                    <div id="banks-dropdown" class="dropdown">
                        <ul>
                            <li><label><input type="checkbox" value="Banco1"> Banco do Brasil</label></li>
                            <li><label><input type="checkbox" value="Banco2"> Banco Pan</label></li>
                            <li><label><input type="checkbox" value="Banco3"> Banco Inter</label></li>
                            <li><label><input type="checkbox" value="Banco3"> Banco Safra</label></li>
                            <li><label><input type="checkbox" value="Banco3"> Banco Votorantim</label></li>
                            <li><label><input type="checkbox" value="Banco3"> Banrisul</label></li>
                            <li><label><input type="checkbox" value="Banco3"> Bradesco</label></li>
                            <li><label><input type="checkbox" value="Banco3"> Banco BTG</label></li>
                            <li><label><input type="checkbox" value="Banco3"> Banco C6</label></li>
                            <li><label><input type="checkbox" value="Banco3"> Caixa Econômica</label></li>
                            <li><label><input type="checkbox" value="Banco3"> Cresol</label></li>
                            <li><label><input type="checkbox" value="Banco3"> Infinity Pay</label></li>
                            <li><label><input type="checkbox" value="Banco3"> Itaú</label></li>
                            <li><label><input type="checkbox" value="Banco3"> Mercado Pago</label></li>
                            <li><label><input type="checkbox" value="Banco3"> Next</label></li>
                            <li><label><input type="checkbox" value="Banco3"> Nubank</label></li>
                            <li><label><input type="checkbox" value="Banco3"> Pag Seguro</label></li>
                            <li><label><input type="checkbox" value="Banco3"> Paypal</label></li>
                            <li><label><input type="checkbox" value="Banco3"> PicPay</label></li>
                            <li><label><input type="checkbox" value="Banco3"> Santander</label></li>
                            <li><label><input type="checkbox" value="Banco3"> Sicoob</label></li>
                            <li><label><input type="checkbox" value="Banco3"> Sicredi</label></li>
                            <li><label><input type="checkbox" value="Banco3"> Outros</label></li>

                            <!-- Adicione mais bancos conforme necessário -->
                        </ul>
                    </div>
                </div>
                <div>
                    <button id="filter-expenses">
                        <i class="fas fa-money-bill"></i> Filtrar por Lançamento
                    </button>
                    <div id="expenses-dropdown" class="dropdown">
                        <ul>
                            <li><label><input type="checkbox" value="Despesas"> Despesas</label></li>
                            <li><label><input type="checkbox" value="Receitas"> Receitas</label></li>
                            <!-- Adicione mais despesas conforme necessário -->
                        </ul>
                    </div>
                </div>
                <div>
                    <button id="filter-categories">
                        <i class="fas fa-tags"></i> Filtrar por Categorias
                    </button>
                    <div id="categories-dropdown" class="dropdown">
                        <ul>
                            <li><label><input type="checkbox" value="Alimentação"> Alimentação</label></li>
                            <li><label><input type="checkbox" value="Benefícios"> Benefícios</label></li>
                            <li><label><input type="checkbox" value="Dívidas e Obrigações Financeiras"> Dívidas e Obrigações Financeiras</label></li>
                            <li><label><input type="checkbox" value="Doações e Caridade"> Doações e Caridade</label></li>
                            <li><label><input type="checkbox" value="Educação"> Educação</label></li>
                            <li><label><input type="checkbox" value="Impostos e Taxas"> Impostos e Taxas</label></li>
                            <li><label><input type="checkbox" value="Investimentos"> Investimentos</label></li>
                            <li><label><input type="checkbox" value="Lazer e Entretenimento"> Lazer e Entretenimento</label></li>
                            <li><label><input type="checkbox" value="Moradia"> Moradia</label></li>
                            <li><label><input type="checkbox" value="Patrimônios"> Patrimônios</label></li>
                            <li><label><input type="checkbox" value="Rendimentos"> Rendimentos</label></li>
                            <li><label><input type="checkbox" value="Saúde"> Saúde</label></li>
                            <li><label><input type="checkbox" value="Seguros"> Seguros</label></li>
                            <li><label><input type="checkbox" value="Transporte"> Transporte</label></li>
                            <li><label><input type="checkbox" value="Vestuário e Beleza"> Vestuário e Beleza</label></li>
                            <li><label><input type="checkbox" value="Outros"> Outros</label></li>

                            <!-- Adicione mais categorias conforme necessário -->
                        </ul>
                    </div>
                </div>
                <div>
                    <button id="filter-period">
                        <i class="fas fa-calendar-alt"></i> Filtrar por Período
                    </button>
                    <div id="period-dropdown" class="dropdown">
                        <label>Data de Início: <input type="date" id="start-date"></label>
                        <label>Data de Fim: <input type="date" id="end-date"></label>
                    </div>
                </div>
                <button id="clear-filters">
                    <i class="fas fa-eraser"></i> Limpar Filtros
                </button>
            </div>
            
        </div>
        <div class="bloco-de-despesas">
            <div class="bancos-bloco">
                <div class="minhas-contas"><i class="fas fa-credit-card"></i><span>Minhas Contas</span><hr></div>
                <div class="meus-cartões"><i class="fas fa-id-card"></i><span>Meus Cartões</span></div>
            </div>
            <div class="despesas-e-receitas">
                <div class="large" id="total-revenue">RECEITAS: R$ 0.00</div>
                <div class="large" id="total-expenses">DESPESAS: R$ 0.00</div>
                <div class="large" id="total-balance">SALDO: R$ 0.00</div>
                <div class="large" id="total-account-balance">SALDO CONTAS: R$ 0.00</div>
                <div class="large" id="total-card-limit">LIMITE CARTÕES: R$ 0.00</div>
            </div>
        </div>
        <div class="grafico-bloco">
            <div class="grafico-item"><span>Top 5 entradas por categorias</span> <canvas id="entradasGraph"></canvas></div>
            <div class="grafico-item"><span>5 principais Despesas</span> <canvas id="despesasGraph"></canvas></div>
            <div class="grafico-item"><span>Despesas Mensais Entrada x Saída</span> <canvas id="entradaSaidaGraph"></canvas></div>
            <div class="grafico-item"><span>Despesas por Categorias</span> <canvas id="categoriasGraph"></canvas></div>
        </div>
        <div class="lancamentos">
            <div class="export">
                <button id="export-excel">Exportar para Excel</button>
                <button id="export-pdf">Exportar para PDF</button>
            </div>
            <div class="receitas-bloco">
                <h3>RECEITAS</h3>
                <table class="tabela" id="receitas-table">
                    <thead>
                        <tr>
                            <th>Descrição</th>
                            <th>Categoria</th>
                            <th>Tipo</th>
                            <th>Valor</th>
                            <th>Data</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
            <div class="despesas-bloco">
                <h3>DESPESAS</h3>
                <table class="tabela" id="despesas-table">
                    <thead>
                        <tr>
                            <th>Descrição</th>
                            <th>Categoria</th>
                            <th>Tipo</th>
                            <th>Valor</th>
                            <th>Data</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <footer>
            <div class="footer-content">
              <!-- Coluna 1: Termos -->
              <div class="terms">
                <p>Conteúdo:</p>
                <a href="#">Política de Privacidade</a>
                <a href="#">Termos de Uso</a>
              </div>
              
              <!-- Coluna 2: Contatos -->
              <div class="contact-info">
                <p>Contatos:</p>
                <a href="https://wa.me/seu_numero" target="_blank"><i class="fab fa-whatsapp"></i> (035) 997378247</a>
                <a href="mailto:seu_email@example.com"><i class="fas fa-envelope"></i> bemiicontato2gmail.com</a>
              </div>
              
              <!-- Coluna 3: Redes Sociais -->
              <div class="social-media">
                <p>Siga-nos:</p>
                <a href="https://facebook.com" target="_blank"><i class="fab fa-facebook-f"></i></a>
                <a href="https://instagram.com" target="_blank"><i class="fab fa-instagram"></i></a>
                <a href="https://twitter.com" target="_blank"><i class="fab fa-twitter"></i></a>
              </div>
            </div>
            <p>&copy; 2024 - Sua Empresa. Todos os direitos reservados.</p>
          </footer>
          
          
    </div>

    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('myModal')">×</span>
            <h1>Gerar Lançamento</h1>
            <div class="form-container">
                <form id="transaction-form">
                    <label for="type">Tipo:</label>
                    <select id="type" required>
                        <option value="revenue">Selecione o Tipo de Lançamento</option>
                        <option value="revenue">Receita</option>
                        <option value="expense">Despesa</option>
                    </select>

                    <!-- Campo de descrição com seleção de subcategorias -->
<label for="description">Descrição:</label>
<select id="description" onchange="updateDescription(this)">
                        <option value="">Selecione uma Descrição</option>
                        <option value="Acessórios">Acessórios</option>
                        <option value="Aluguel">Aluguel</option>
                        <option value="Aplicativos de transporte (Uber, 99, etc.)">Aplicativos de transporte (Uber, 99, etc.)</option>
                        <option value="Assinaturas de streaming (Netflix, Spotify, etc.)">Assinaturas de streaming (Netflix, Spotify, etc.)</option>
                        <option value="Atividades recreativas">Atividades recreativas</option>
                        <option value="Barbearia">Barbearia</option>
                        <option value="Bônus e Comissões">Bônus e Comissões</option>
                        <option value="Caridade">Caridade</option>
                        <option value="Cartão de crédito">Cartão de crédito</option>
                        <option value="Combustível">Combustível</option>
                        <option value="Consultas médicas">Consultas médicas</option>
                        <option value="Contas de água">Contas de água</option>
                        <option value="Cursos e treinamentos">Cursos e treinamentos</option>
                        <option value="Dividendos de Investimentos">Dividendos de Investimentos</option>
                        <option value="Emprestimos">Emprestimos</option>
                        <option value="Estacionamentos">Estacionamentos</option>
                        <option value="Estética">Estética</option>
                        <option value="Exames médicos">Exames médicos</option>
                        <option value="Financiamentos">Financiamentos</option>
                        <option value="Gás">Gás</option>
                        <option value="Hipoteca">Hipoteca</option>
                        <option value="Imposto de renda">Imposto de renda</option>
                        <option value="Impostos e Taxas">Impostos e Taxas</option>
                        <option value="Internet">Internet</option>
                        <option value="IPTU (Imposto Predial e Territorial Urbano)">IPTU (Imposto Predial e Territorial Urbano)</option>
                        <option value="IPVA (Imposto sobre a Propriedade de Veículos Automotores)">IPVA (Imposto sobre a Propriedade de Veículos Automotores)</option>
                        <option value="Juros">Juros</option>
                        <option value="Juros de Poupança">Juros de Poupança</option>
                        <option value="Lanchonete">Lanchonete</option>
                        <option value="Livros">Livros</option>
                        <option value="Luz">Luz</option>
                        <option value="Manutenção do veículo">Manutenção do veículo</option>
                        <option value="Manutenção e reparos">Manutenção e reparos</option>
                        <option value="Material escolar">Material escolar</option>
                        <option value="Medicamentos">Medicamentos</option>
                        <option value="Mensalidades escolares">Mensalidades escolares</option>
                        <option value="Mensalidades universitárias">Mensalidades universitárias</option>
                        <option value="Multas">Multas</option>
                        <option value="Parcelamentos">Parcelamentos</option>
                        <option value="Pedágios">Pedágios</option>
                        <option value="Planos de saúde">Planos de saúde</option>
                        <option value="Produtos de beleza">Produtos de beleza</option>
                        <option value="Rendimentos de Freelance">Rendimentos de Freelance</option>
                        <option value="Restaurantes">Restaurantes</option>
                        <option value="Roupas">Roupas</option>
                        <option value="Salão de beleza">Salão de beleza</option>
                        <option value="Salário">Salário</option>
                        <option value="Seguro automotivo">Seguro automotivo</option>
                        <option value="Seguro de saúde">Seguro de saúde</option>
                        <option value="Seguro de vida">Seguro de vida</option>
                        <option value="Seguro residencial">Seguro residencial</option>
                        <option value="Trabalho Autônomo">Trabalho Autônomo</option>
                        <option value="Transporte público (ônibus, metrô, etc.)">Transporte público (ônibus, metrô, etc.)</option>
                        <option value="Tratamentos">Tratamentos</option>
                        <option value="Venda de Produtos">Venda de Produtos</option>
                        <option value="Vendas de Investimentos">Vendas de Investimentos</option>
                        <option value="Viagens">Viagens</option>
                        <option value="Viagens">Outros</option>                       
</select>
        


                    <label for="category">Categoria:</label>
                    <select id="category" required>
                        <option value="">Selecione uma Categoria</option>
                        <option value="Alimentação">Alimentação</option>
                        <option value="Benefícios">Benefícios</option>
                        <option value="Dívidas e Obrigações Financeiras">Dívidas e Obrigações Financeiras</option>
                        <option value="Doações e Caridade">Doações e Caridade</option>
                        <option value="Educação">Educação</option>
                        <option value="Impostos e Taxas">Impostos e Taxas</option>
                        <option value="Investimentos">Investimentos</option>
                        <option value="Lazer e Entretenimento">Lazer e Entretenimento</option>
                        <option value="Moradia">Moradia</option>
                        <option value="Patrimônios">Patrimônios</option>
                        <option value="Rendimentos">Rendimentos</option>
                        <option value="Saúde">Saúde</option>
                        <option value="Seguros">Seguros</option>
                        <option value="Transporte">Transporte</option>
                        <option value="Vestuário e Beleza">Vestuário e Beleza</option>
                        <option value="Seguros">outros</option>
                    </select>
                    <label for="amount">Valor:</label>
                    <input type="number" id="amount" required placeholder="Valor" step="0.01">
                    <label for="date">Data:</label>
                    <input type="date" id="date" required>
                    <button type="submit">Adicionar Lançamento</button>
                </form>
            </div>
        </div>
    </div>

    <div id="myModalConta" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('myModalConta')">×</span>
            <h1>Incluir Conta</h1>
            <div class="form-container">
                // Substitua o form existente em myModalConta por este
                <form id="account-form" onsubmit="addAccount(event)">
                    <label for="account-name">Nome da Conta:</label>
                    <select id="account-name" required>
                        <option value="">Selecione um nome</option>
                        <option value="Banco do Brasil"><i class="fas fa-university"></i> Banco do Brasil</option>
                        <option value="Banco Pan">Banco Pan</option>
                        <option value="Banco Inter">Banco Inter</option>
                        <option value="Banco Safra">Banco Safra</option>
                        <option value="Banco Votorantim">Banco Votorantim</option>
                        <option value="Banrisul">Banrisul</option>
                        <option value="Bradesco">Bradesco</option>
                        <option value="Banco BTG">Banco BTG</option>
                        <option value="Banco C6">Banco C6</option>
                        <option value="Caixa Econômica">Caixa Econômica</option>
                        <option value="Cresol">Cresol</option>
                        <option value="Infinity Pay">Infinity Pay</option>
                        <option value="Itaú">Itaú</option>
                        <option value="Mercado Pago">Mercado Pago</option>
                        <option value="Next">Next</option>
                        <option value="Nubank">Nubank</option>
                        <option value="Pag Seguro">Pag Seguro</option>
                        <option value="Paypal">Paypal</option>
                        <option value="PicPay">PicPay</option>
                        <option value="Santander">Santander</option>
                        <option value="Sicoob">Sicoob</option>
                        <option value="Sicredi">Sicredi</option>
                        <option value="Outros">Outros</option>
                    </select>
                    <label for="bank-logo-account">Banco:</label>
                    <select id="bank-logo-account" required>
                        <option value="">Selecione um banco</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/banco-do-brasil.jpeg?raw=true">Banco do Brasil</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/banco%20pan.jpeg?raw=true">Banco Pan</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/banco-inter.jpeg?raw=true">Banco Inter</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/banco-safra.jpeg?raw=true">Banco Safra</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/banco-votorantim.jpeg?raw=true">Banco Votorantim</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/banrisul.jpeg?raw=true">Banrisul</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/bradesco.jpeg?raw=true">Bradesco</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/btg.jpeg?raw=true">Banco BTG</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/c6.jpeg?raw=true">Banco C6</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/caixa.jpeg?raw=true">Caixa Econômica</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/cresol.jpeg?raw=true">Cresol</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/infinity-pay.jpeg?raw=true">Infinity Pay</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/itau.jpeg?raw=true">Itaú</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/mercado-pago.jpeg?raw=true">Mercado Pago</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/next.jpeg?raw=true">Next</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/nubank.jpeg?raw=true">Nubank</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/pagseguro.jpeg?raw=true">Pag Seguro</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/paypal.jpeg?raw=true">Paypal</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/picpay.jpeg?raw=true">PicPay</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/santander.jpeg?raw=true">Santander</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/sicoob.jpeg?raw=true">Sicoob</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/sicredi.jpeg?raw=true">Sicredi</option>
                        <!-- Adicione mais bancos conforme necessário -->
                    </select>
                    <label for="account-balance">Saldo Inicial:</label>
                    <input type="number" id="account-balance" required placeholder="Saldo" step="0.01">
                    <button type="submit">Adicionar Conta</button>
                </form>
                

                </form>
            </div>
        </div>
    </div>

    <div id="myModalCartao" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('myModalCartao')">×</span>
            <h1>Incluir Cartão</h1>
            <div class="form-container">
                // Substitua o form existente em myModalCartao por este
                <form id="card-form" onsubmit="addCard(event)">
                    <label for="card-name">Nome do Cartão:</label>
                    <select id="card-name" required>
                        <option value="">Selecione um nome</option>
                        <option value="Banco do Brasil">Banco do Brasil</option>
                        <option value="Banco Pan">Banco Pan</option>
                        <option value="Banco Inter">Banco Inter</option>
                        <option value="Banco Safra">Banco Safra</option>
                        <option value="Banco Votorantim">Banco Votorantim</option>
                        <option value="Banrisul">Banrisul</option>
                        <option value="Bradesco">Bradesco</option>
                        <option value="Banco BTG">Banco BTG</option>
                        <option value="Banco C6">Banco C6</option>
                        <option value="Caixa Econômica">Caixa Econômica</option>
                        <option value="Cresol">Cresol</option>
                        <option value="Infinity Pay">Infinity Pay</option>
                        <option value="Itaú">Itaú</option>
                        <option value="Mercado Pago">Mercado Pago</option>
                        <option value="Next">Next</option>
                        <option value="Nubank">Nubank</option>
                        <option value="Pag Seguro">Pag Seguro</option>
                        <option value="Paypal">Paypal</option>
                        <option value="PicPay">PicPay</option>
                        <option value="Santander">Santander</option>
                        <option value="Sicoob">Sicoob</option>
                        <option value="Sicredi">Sicredi</option>
                        <option value="Outros">Outros</option>
                    </select>
                    <label for="bank-logo-card">Banco:</label>
                    <select id="bank-logo-card" required>
                        <option value="">Selecione um banco</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/banco-do-brasil.jpeg?raw=true">Banco do Brasil</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/banco%20pan.jpeg?raw=true">Banco Pan</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/banco-inter.jpeg?raw=true">Banco Inter</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/banco-safra.jpeg?raw=true">Banco Safra</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/banco-votorantim.jpeg?raw=true">Banco Votorantim</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/banrisul.jpeg?raw=true">Banrisul</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/bradesco.jpeg?raw=true">Bradesco</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/btg.jpeg?raw=true">Banco BTG</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/c6.jpeg?raw=true">Banco C6</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/caixa.jpeg?raw=true">Caixa Econômica</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/cresol.jpeg?raw=true">Cresol</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/infinity-pay.jpeg?raw=true">Infinity Pay</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/itau.jpeg?raw=true">Itaú</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/mercado-pago.jpeg?raw=true">Mercado Pago</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/next.jpeg?raw=true">Next</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/nubank.jpeg?raw=true">Nubank</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/pagseguro.jpeg?raw=true">Pag Seguro</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/paypal.jpeg?raw=true">Paypal</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/picpay.jpeg?raw=true">PicPay</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/santander.jpeg?raw=true">Santander</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/sicoob.jpeg?raw=true">Sicoob</option>
                        <option value="https://github.com/PauloTalamini/gerenciamentodedespesas/blob/main/sicredi.jpeg?raw=true">Sicredi</option>
                        <!-- Adicione mais bancos conforme necessário -->
                    </select>
                    <label for="card-limit">Limite do Cartão:</label>
                    <input type="number" id="card-limit" required placeholder="Limite" step="0.01">
                    <button type="submit">Adicionar Cartão</button>
                </form>
                

                </form>
            </div>
        </div>
    </div>

    <script>
        let totalRevenue = 0;
        let totalExpenses = 0;
        let totalBalance = 0;
        const totalRevenueElement = document.getElementById('total-revenue');
        const totalExpensesElement = document.getElementById('total-expenses');
        const totalBalanceElement = document.getElementById('total-balance');
        const receitasTableBody = document.querySelector('#receitas-table tbody');
        const despesasTableBody = document.querySelector('#despesas-table tbody');

        document.getElementById('open-modal-btn').onclick = function() {
            openModal('myModal');
        }

        document.getElementById('open-modal-btn-conta').onclick = function() {
            openModal('myModalConta');
        }

        document.getElementById('open-modal-btn-cartao').onclick = function() {
            openModal('myModalCartao');
        }

        function openModal(modalId) {
            document.getElementById(modalId).style.display = "block";
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = "none";
        }

        document.querySelector('.close').onclick = function() {
            closeModal('myModal');
        }

        document.getElementById('transaction-form').onsubmit = function(event) {
            event.preventDefault();

            const type = document.getElementById('type').value;
            const description = document.getElementById('description').value;
            const category = document.getElementById('category').value;
            const amount = parseFloat(document.getElementById('amount').value);
            const date = document.getElementById('date').value;

            const transaction = { type, description, category, amount, date };

            saveTransaction(transaction);

            closeModal('myModal');
            document.getElementById('transaction-form').reset();
        }

        function saveTransaction(transaction) {
            let transactions = JSON.parse(localStorage.getItem('transactions')) || [];
            transactions.push(transaction);
            transactions.sort((a, b) => new Date(b.date) - new Date(a.date)); // Ordena por data
            localStorage.setItem('transactions', JSON.stringify(transactions));
            updateTables(transactions); // Atualiza as tabelas
        }

        function loadTransactions() {
            const transactions = JSON.parse(localStorage.getItem('transactions')) || [];
            transactions.sort((a, b) => new Date(b.date) - new Date(a.date)); // Ordena por data
            updateTables(transactions); // Atualiza as tabelas
        }

        function updateTables(transactions) {
    receitasTableBody.innerHTML = '';
    despesasTableBody.innerHTML = '';
    totalRevenue = 0;
    totalExpenses = 0;

    transactions.forEach((transaction, index) => {
        const newRow = document.createElement('tr');
        newRow.innerHTML = `
            <td>${transaction.description}</td>
            <td>${transaction.category}</td>
            <td>${transaction.type === 'expense' ? 'Despesa' : 'Receita'}</td>
            <td>R$ ${transaction.amount.toFixed(2)}</td>
            <td>${transaction.date}</td>
            <td><i class="fas fa-trash-alt" onclick="removeTransaction(${index})" style="cursor: pointer; color: red;font-weight: 400;font-size: 14px;justify-content: center;display: flex;"></i></td>
        `;

        if (transaction.type === 'expense') {
            totalExpenses += transaction.amount;
            totalExpensesElement.textContent = `DESPESAS: R$ ${totalExpenses.toFixed(2)}`;
            despesasTableBody.appendChild(newRow); // Adiciona a linha na tabela de despesas
        } else {
            totalRevenue += transaction.amount;
            totalRevenueElement.textContent = `RECEITAS: R$ ${totalRevenue.toFixed(2)}`;
            receitasTableBody.appendChild(newRow); // Adiciona a linha na tabela de receitas
        }
    });

            totalBalance = totalRevenue - totalExpenses;
            totalBalanceElement.textContent = `TOTAL: R$ ${totalBalance.toFixed(2)}`;
        }

        function removeTransaction(index) {
    let transactions = JSON.parse(localStorage.getItem('transactions')) || [];
    transactions.splice(index, 1); // Remove a transação pelo índice
    localStorage.setItem('transactions', JSON.stringify(transactions)); // Atualiza o armazenamento local
    updateTables(transactions); // Atualiza a visualização
}

        window.onload = loadTransactions;

        function addAccount(event) {
    event.preventDefault();

    const accountName = document.getElementById('account-name').value;
    const accountBalance = parseFloat(document.getElementById('account-balance').value);
    const bankLogo = document.getElementById('bank-logo-account').value;

    const accountItem = document.createElement('div');
    accountItem.innerHTML = `<img src="${bankLogo}" style="width: 30px; height: 30px;"> ${accountName} - R$ ${accountBalance.toFixed(2)}`;
    document.querySelector('.minhas-contas').appendChild(accountItem);

    closeModal('myModalConta');
    document.getElementById('account-form').reset();
}

function addCard(event) {
    event.preventDefault();

    const cardName = document.getElementById('card-name').value;
    const cardLimit = parseFloat(document.getElementById('card-limit').value);
    const bankLogo = document.getElementById('bank-logo-card').value;

    const cardItem = document.createElement('div');
    cardItem.innerHTML = `<img src="${bankLogo}" style="width: 30px; height: 30px;"> ${cardName} - Limite: R$ ${cardLimit.toFixed(2)}`;
    document.querySelector('.meus-cartões').appendChild(cardItem);

    closeModal('myModalCartao');
    document.getElementById('card-form').reset();
}

function addAccount(event) {
    event.preventDefault();

    const accountName = document.getElementById('account-name').value;
    const accountBalance = parseFloat(document.getElementById('account-balance').value);
    const bankLogoAccount = document.getElementById('bank-logo-account').value;

    const account = { name: accountName, balance: accountBalance, logo: bankLogoAccount };

    let accounts = JSON.parse(localStorage.getItem('accounts')) || [];
    accounts.push(account);
    localStorage.setItem('accounts', JSON.stringify(accounts));

    updateAccounts();
    closeModal('myModalConta');
    document.getElementById('account-form').reset();
}

function addCard(event) {
    event.preventDefault();

    const cardName = document.getElementById('card-name').value;
    const cardLimit = parseFloat(document.getElementById('card-limit').value);
    const bankLogoCard = document.getElementById('bank-logo-card').value;

    const card = { name: cardName, limit: cardLimit, logo: bankLogoCard };

    let cards = JSON.parse(localStorage.getItem('cards')) || [];
    cards.push(card);
    localStorage.setItem('cards', JSON.stringify(cards));

    updateCards();
    closeModal('myModalCartao');
    document.getElementById('card-form').reset();
}

function updateAccounts() {
    const accounts = JSON.parse(localStorage.getItem('accounts')) || [];
    const accountsContainer = document.querySelector('.minhas-contas');
    accountsContainer.innerHTML = '<i class="fas fa-credit-card"></i><span>Minhas Contas</span>';

    accounts.forEach(account => {
        const accountElement = document.createElement('div');
        accountElement.innerHTML = `<img src="${account.logo}" style="width:30px; margin-right:5px;vertical-align: middle;border-radius:50%;">${account.name} - Saldo: R$ ${account.balance.toFixed(2)}`;
        accountsContainer.appendChild(accountElement);
    });
}

function updateCards() {
    const cards = JSON.parse(localStorage.getItem('cards')) || [];
    const cardsContainer = document.querySelector('.meus-cartões');
    cardsContainer.innerHTML = '<i class="fas fa-id-card"></i><span>Meus Cartões</span>';

    cards.forEach(card => {
        const cardElement = document.createElement('div');
        cardElement.innerHTML = `<img src="${card.logo}" style="width:20px; margin-right:5px;vertical-align: middle;border-radius:50%;">${card.name} - Limite: R$ ${card.limit.toFixed(2)}`;
        cardsContainer.appendChild(cardElement);
    });
}

// Carregar contas e cartões ao iniciar a página
window.onload = function() {
    loadTransactions();
    updateAccounts();
    updateCards();
};

// aqui - - - - - Função de atualização das contas e cálculo do total de saldo das contas
function updateAccounts() {
    const accounts = JSON.parse(localStorage.getItem('accounts')) || [];
    const accountsContainer = document.querySelector('.minhas-contas');
    accountsContainer.innerHTML = '<i class="fas fa-credit-card"></i><span>Minhas Contas</span>';
    
    let totalAccountBalance = 0; // Total de saldo das contas

    accounts.forEach(account => {
        const accountElement = document.createElement('div');
        accountElement.innerHTML = `<img src="${account.logo}" style="width:20px; margin-right:5px;vertical-align: middle;border-radius:50%;">${account.name} - Saldo: R$ ${account.balance.toFixed(2)}`;
        accountsContainer.appendChild(accountElement);

        totalAccountBalance += account.balance; // Soma dos saldos das contas
    });

    // Atualiza o valor total no bloco de Saldo Contas
    document.querySelector('#total-account-balance').textContent = `SALDO CONTAS: R$ ${totalAccountBalance.toFixed(2)}`;
}

// Função de atualização dos cartões e cálculo do total dos limites dos cartões
function updateCards() {
    const cards = JSON.parse(localStorage.getItem('cards')) || [];
    const cardsContainer = document.querySelector('.meus-cartões');
    cardsContainer.innerHTML = '<i class="fas fa-id-card"></i><span>Meus Cartões</span>';
    
    let totalCardLimit = 0; // Total de limite dos cartões

    cards.forEach(card => {
        const cardElement = document.createElement('div');
        cardElement.innerHTML = `<img src="${card.logo}" style="width:20px; margin-right:5px;vertical-align: middle;border-radius:50%;">${card.name} - Limite: R$ ${card.limit.toFixed(2)}`;
        cardsContainer.appendChild(cardElement);

        totalCardLimit += card.limit; // Soma dos limites dos cartões
    });

    // Atualiza o valor total no bloco de Limite Cartões
    document.querySelector('#total-card-limit').textContent = `LIMITE CARTÕES: R$ ${totalCardLimit.toFixed(2)}`;
}

// Carregar contas e cartões ao iniciar a página
window.onload = function() {
    loadTransactions(); // Carrega as transações
    updateAccounts();    // Atualiza as contas e soma os saldos
    updateCards();       // Atualiza os cartões e soma os limites
};
function updateAccounts() {
        const accounts = JSON.parse(localStorage.getItem('accounts')) || [];
        const accountsContainer = document.querySelector('.minhas-contas');
        accountsContainer.innerHTML = '<i class="fas fa-credit-card"></i><span>Minhas Contas</span>';
        
        let totalAccountBalance = 0; // Total de saldo das contas

        accounts.forEach((account, index) => {
            const accountElement = document.createElement('div');
            accountElement.innerHTML = `
                <img src="${account.logo}" style="width:20px; margin-right:5px;vertical-align: middle;border-radius:50%;">
                ${account.name} - Saldo: R$ ${account.balance.toFixed(2)} 
                <i class="fas fa-trash-alt" onclick="removeAccount(${index})" style="cursor: pointer; color: red;font-weight: 400;vertical-align: middle;margin-left: 4%;
    margin-right: auto;"></i>
            `;
            accountsContainer.appendChild(accountElement);

            totalAccountBalance += account.balance; // Soma dos saldos das contas
        });

        // Atualiza o valor total no bloco de Saldo Contas
        document.querySelector('#total-account-balance').textContent = `SALDO CONTAS: R$ ${totalAccountBalance.toFixed(2)}`;
    }

    function removeAccount(index) {
        let accounts = JSON.parse(localStorage.getItem('accounts')) || [];
        accounts.splice(index, 1); // Remove a conta pelo índice
        localStorage.setItem('accounts', JSON.stringify(accounts)); // Atualiza o armazenamento local
        updateAccounts(); // Atualiza a visualização
    }

    function updateCards() {
        const cards = JSON.parse(localStorage.getItem('cards')) || [];
        const cardsContainer = document.querySelector('.meus-cartões');
        cardsContainer.innerHTML = '<i class="fas fa-id-card"></i><span>Meus Cartões</span>';
        
        let totalCardLimit = 0; // Total de limite dos cartões

        cards.forEach((card, index) => {
            const cardElement = document.createElement('div');
            cardElement.innerHTML = `
                <img src="${card.logo}" style="width:20px; margin-right:5px;vertical-align: middle;border-radius:50%;">
                ${card.name} - Limite: R$ ${card.limit.toFixed(2)} 
                <i class="fas fa-trash-alt" onclick="removeCard(${index})" style="cursor: pointer; color: red;font-weight: 400;vertical-align: middle;margin-left: 4%;
    margin-right: auto;"></i>
            `;
            cardsContainer.appendChild(cardElement);

            totalCardLimit += card.limit; // Soma dos limites dos cartões
        });

        // Atualiza o valor total no bloco de Limite Cartões
        document.querySelector('#total-card-limit').textContent = `LIMITE CARTÕES: R$ ${totalCardLimit.toFixed(2)}`;
    }

    function removeCard(index) {
        let cards = JSON.parse(localStorage.getItem('cards')) || [];
        cards.splice(index, 1); // Remove o cartão pelo índice
        localStorage.setItem('cards', JSON.stringify(cards)); // Atualiza o armazenamento local
        updateCards(); // Atualiza a visualização
    }

    // Carregar contas e cartões ao iniciar a página
    window.onload = function() {
        loadTransactions(); // Carrega as transações
        updateAccounts();    // Atualiza as contas e soma os saldos
        updateCards();       // Atualiza os cartões e soma os limites
    };

    document.getElementById('filter-banks').onclick = function() {
    toggleDropdown('banks-dropdown');
};

document.getElementById('filter-expenses').onclick = function() {
    toggleDropdown('expenses-dropdown');
};

document.getElementById('filter-categories').onclick = function() {
    toggleDropdown('categories-dropdown');
};

document.getElementById('filter-period').onclick = function() {
    toggleDropdown('period-dropdown');
};

function toggleDropdown(dropdownId) {
    const dropdown = document.getElementById(dropdownId);
    dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
}

document.getElementById('clear-filters').onclick = function() {
    clearFilters();
};

function clearFilters() {
    // Limpa todos os checkboxes
    document.querySelectorAll('.dropdown input[type="checkbox"]').forEach(checkbox => {
        checkbox.checked = false;
    });
    
    // Limpa as datas
    document.getElementById('start-date').value = '';
    document.getElementById('end-date').value = '';

    // Atualiza as tabelas para mostrar todos os itens
    loadTransactions(); // Chama a função que recarrega as transações
}

function applyFilters() {
    const selectedBanks = Array.from(document.querySelectorAll('#banks-dropdown input:checked')).map(cb => cb.value);
    const selectedExpenses = Array.from(document.querySelectorAll('#expenses-dropdown input:checked')).map(cb => cb.value);
    const selectedCategories = Array.from(document.querySelectorAll('#categories-dropdown input:checked')).map(cb => cb.value);
    const startDate = document.getElementById('start-date').value;
    const endDate = document.getElementById('end-date').value;

    // Lógica para filtrar as transações conforme as seleções
    const transactions = JSON.parse(localStorage.getItem('transactions')) || [];
    const filteredTransactions = transactions.filter(transaction => {
        const isBankMatched = selectedBanks.length ? selectedBanks.includes(transaction.bank) : true;
        const isExpenseMatched = selectedExpenses.length ? selectedExpenses.includes(transaction.expense) : true;
        const isCategoryMatched = selectedCategories.length ? selectedCategories.includes(transaction.category) : true;
        const isDateMatched = (!startDate || new Date(transaction.date) >= new Date(startDate)) &&
                              (!endDate || new Date(transaction.date) <= new Date(endDate));
        
        return isBankMatched && isExpenseMatched && isCategoryMatched && isDateMatched;
    });

    updateTables(filteredTransactions); // Atualiza as tabelas com os itens filtrados
}

// Atualizar as tabelas após a seleção de filtros
document.querySelectorAll('.dropdown input[type="checkbox"]').forEach(checkbox => {
    checkbox.onchange = applyFilters;
});

document.getElementById('start-date').onchange = applyFilters;
document.getElementById('end-date').onchange = applyFilters;




// Export
document.getElementById('export-excel').onclick = function() {
    exportData('excel');
};

document.getElementById('export-pdf').onclick = function() {
    exportData('pdf');
};

function exportData(format) {
    const exportChoice = prompt("Você gostaria de baixar: 1) Despesas, 2) Receitas ou 3) Ambos? (Digite o número)");

    if (exportChoice === '1') {
        if (format === 'excel') exportToExcel('despesas-table');
        else if (format === 'pdf') exportToPDF('despesas-table');
    } else if (exportChoice === '2') {
        if (format === 'excel') exportToExcel('receitas-table');
        else if (format === 'pdf') exportToPDF('receitas-table');
    } else if (exportChoice === '3') {
        if (format === 'excel') exportBothToExcel();
        else if (format === 'pdf') exportBothToPDF();
    } else {
        alert("Opção inválida. Tente novamente.");
    }
}

function exportToExcel(tableId) {
    const table = document.getElementById(tableId);
    const wb = XLSX.utils.table_to_book(table, {sheet: "Sheet1"});
    XLSX.writeFile(wb, `${tableId}.xlsx`);
}

function exportBothToExcel() {
    const wb = XLSX.utils.book_new();
    const receitas = document.getElementById('receitas-table');
    XLSX.utils.book_append_sheet(wb, XLSX.utils.table_to_sheet(receitas), "Receitas");
    const despesas = document.getElementById('despesas-table');
    XLSX.utils.book_append_sheet(wb, XLSX.utils.table_to_sheet(despesas), "Despesas");
    
    XLSX.writeFile(wb, `Receitas_e_Despesas.xlsx`);
}

function exportToPDF(tableId) {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    const table = document.getElementById(tableId);
    const rows = Array.from(table.rows).map(row => Array.from(row.cells).map(cell => cell.innerText));
    
    doc.autoTable({
        head: [rows[0]],
        body: rows.slice(1),
        theme: 'grid'
    });
    doc.save(`${tableId}.pdf`);
}

function exportBothToPDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    let receitas = document.getElementById('receitas-table');
    let receitasRows = Array.from(receitas.rows).map(row => Array.from(row.cells).map(cell => cell.innerText));
    doc.autoTable({
        head: [receitasRows[0]],
        body: receitasRows.slice(1),
        theme: 'grid'
    });

    doc.addPage();

    let despesas = document.getElementById('despesas-table');
    let despesasRows = Array.from(despesas.rows).map(row => Array.from(row.cells).map(cell => cell.innerText));
    doc.autoTable({
        head: [despesasRows[0]],
        body: despesasRows.slice(1),
        theme: 'grid'
    });

    doc.save(`Receitas_e_Despesas.pdf`);
}


// Verifique se o usuário já ativou o modo noturno anteriormente
document.addEventListener('DOMContentLoaded', () => {
    const darkModeEnabled = localStorage.getItem('darkMode') === 'enabled';
    if (darkModeEnabled) {
        document.body.classList.add('dark-mode');
    }
});

// Toggle e salve o estado do modo noturno
document.getElementById('darkModeToggle').addEventListener('click', function () {
    document.body.classList.toggle('dark-mode');
    const isDarkMode = document.body.classList.contains('dark-mode');
    localStorage.setItem('darkMode', isDarkMode ? 'enabled' : 'disabled');
}); 

function exportToPDF(tableId) {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    const table = document.getElementById(tableId);
    if (!table) {
        alert("Tabela não encontrada!");
        return;
    }

    const rows = Array.from(table.rows).map(row => Array.from(row.cells).map(cell => cell.innerText));
    
    if (rows.length === 0) {
        alert("A tabela está vazia.");
        return;
    }

    doc.autoTable({
        head: [rows[0]],  // Certifique-se de que rows[0] é um array de cabeçalhos
        body: rows.slice(1),
        theme: 'grid',
        startY: 20,  // Para evitar sobrepor o título da página, se houver
    });
    doc.save(`${tableId}.pdf`);
}

function exportBothToPDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    let receitas = document.getElementById('receitas-table');
    if (receitas) {
        let receitasRows = Array.from(receitas.rows).map(row => Array.from(row.cells).map(cell => cell.innerText));
        doc.autoTable({
            head: [receitasRows[0]],
            body: receitasRows.slice(1),
            theme: 'grid',
            startY: 20,  // Evita que a tabela sobreponha o título
        });
        doc.addPage();
    } else {
        alert("Tabela de receitas não encontrada.");
    }

    let despesas = document.getElementById('despesas-table');
    if (despesas) {
        let despesasRows = Array.from(despesas.rows).map(row => Array.from(row.cells).map(cell => cell.innerText));
        doc.autoTable({
            head: [despesasRows[0]],
            body: despesasRows.slice(1),
            theme: 'grid',
        });
    } else {
        alert("Tabela de despesas não encontrada.");
    }

    doc.save(`Receitas_e_Despesas.pdf`);
}


    </script>
</body>
</html>		